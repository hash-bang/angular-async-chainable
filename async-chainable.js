!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.asyncChainable=t()}}(function(){var t;return function e(t,n,r){function i(o,c){if(!n[o]){if(!t[o]){var s="function"==typeof require&&require;if(!c&&s)return s(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return i(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,e,n){function r(t){for(var e=0,n=[];;){var r=typeof t[e];if("undefined"==r)break;"object"==r&&"[object Array]"==Object.prototype.toString.call(t[e])&&(r="array",t[e].length&&t[e].every(function(t){return"object"==typeof t&&"[object Object]"==Object.prototype.toString.call(t)})&&(r="collection")),n.push(r),e++}return n.toString()}function i(t){return"object"==typeof t&&"[object Array]"==Object.prototype.toString.call(t)}function a(t){return"object"==typeof t&&"[object Array]"!=Object.prototype.toString.call(t)}function o(t){return t.call(this),this}function c(){var t=r(arguments);switch(t){case"":break;case"function":this._struct.push({type:"seriesArray",payload:[arguments[0]]});break;case"string,function":var e={};e[arguments[0]]=arguments[1],this._struct.push({type:"seriesObject",payload:e});break;case"array":this._struct.push({type:"seriesArray",payload:arguments[0]});break;case"object":this._struct.push({type:"seriesObject",payload:arguments[0]});break;case"collection":this._struct.push({type:"seriesCollection",payload:arguments[0]});break;case"array,function":this._struct.push({type:"seriesArray",payload:arguments[0]}),this.end(arguments[1]);break;case"object,function":this._struct.push({type:"seriesObject",payload:arguments[0]}),this.end(arguments[1]);break;default:throw new Error("Unknown call style for .series(): "+t)}return this}function s(){var t=r(arguments);switch(t){case"":break;case"function":this._struct.push({type:"parallelArray",payload:[arguments[0]]});break;case"string,function":var e={};e[arguments[0]]=arguments[1],this._struct.push({type:"parallelArray",payload:e});break;case"array":this._struct.push({type:"parallelArray",payload:arguments[0]});break;case"object":this._struct.push({type:"parallelObject",payload:arguments[0]});break;case"collection":this._struct.push({type:"parallelCollection",payload:arguments[0]});break;case"array,function":this._struct.push({type:"parallelArray",payload:arguments[0]}),this.end(arguments[1]);break;case"object,function":this._struct.push({type:"parallelObject",payload:arguments[0]}),this.end(arguments[1]);break;default:throw new Error("Unknown call style for .parallel(): "+t)}return this}function u(){var t=r(arguments);switch(t){case"":break;case"collection,function":case"array,function":this._struct.push({type:"forEachArray",payload:arguments[0],callback:arguments[1]});break;case"object,function":this._struct.push({type:"forEachObject",payload:arguments[0],callback:arguments[1]});break;case"string,function":this._struct.push({type:"forEachLateBound",payload:arguments[0],callback:arguments[1]});break;default:throw new Error("Unknown call style for .forEach(): "+t)}return this}function l(t,e,n){var r=this;n.waitingOn=(n.waitingOn||0)+1,n.waitingOnIds||(n.waitingOnIds=[]),n.waitingOnIds.push(t),r._deferred.push({id:t||null,prereq:n.prereq||[],payload:function(i){r._context._id=t,e.call(r._options.context,function(e,i){t&&(r._context[t]=i),r._deferredRunning--,0==--n.waitingOn&&(n.completed=!0,r._struct.length&&"await"==r._struct[r._structPointer].type&&r._execute(e)),r._execute(e)})}})}function f(){var t=this;t._options.limit&&t._deferredRunning>=t._options.limit||(t._deferred=t._deferred.filter(function(e){return t._options.limit&&t._deferredRunning>=t._options.limit?!0:0==e.prereq.length||e.prereq.every(function(e){return t._context.hasOwnProperty(e)})?(t._deferredRunning++,setTimeout(e.payload),!1):!0}))}function p(){var t=r(arguments);switch(t){case"":break;case"function":this._struct.push({type:"deferArray",payload:[arguments[0]]});break;case"string,function":var e={};e[arguments[0]]=arguments[1],this._struct.push({type:"deferObject",payload:e});break;case"array":this._struct.push({type:"deferArray",payload:arguments[0]});break;case"object":this._struct.push({type:"deferObject",payload:arguments[0]});break;case"collection":this._struct.push({type:"deferCollection",payload:arguments[0]});break;case"array,function":this._struct.push({type:"deferObject",prereq:arguments[0],payload:{"":arguments[1]}});break;case"string,string,function":var e={};e[arguments[1]]=arguments[2],this._struct.push({type:"deferObject",prereq:[arguments[0]],payload:e});break;case"array,string,function":var e={};e[arguments[1]]=arguments[2],this._struct.push({type:"deferObject",prereq:arguments[0],payload:e});break;default:throw new Error("Unknown call style for .defer():"+t)}return this}function h(){var t=[],e=arguments;return r(arguments).split(",").forEach(function(n,r){switch(n){case"":break;case"string":t.push(e[r]);break;case"array":t.concat(e[r]);break;default:throw new Error("Unknown argument type passed to .await(): "+n)}}),this._struct.push({type:"await",payload:t}),this}function y(t){return this._struct.push({type:"limit",payload:t}),this}function d(t){return this._struct.push({type:"context",payload:t}),this}function m(){var t=r(arguments);switch(t){case"":break;case"string,string":case"string,number":case"string,array":case"string,collection":case"string,object":var e={};e[arguments[0]]=arguments[1],this._struct.push({type:"set",payload:e});break;case"object":this._struct.push({type:"set",payload:arguments[0]});break;case"function":this._struct.push({type:"seriesArray",payload:[arguments[0]]});break;case"string,function":var e={};e[arguments[0]]=arguments[1],this._struct.push({type:"seriesObject",payload:e});break;case"string":this._setRaw(arguments[0],void 0);break;default:throw new Error("Unknown call style for .set():"+t)}return this}function g(){var t=r(arguments);switch(t){case"":break;case"string,string":case"string,number":case"string,array":case"string,collection":case"string,object":this._setRaw(arguments[0],arguments[1]);break;case"object":for(var e in arguments[0])this._setRaw(e,arguments[0][e]);break;case"string,function":this._setRaw(arguments[0],arguments[1].call(this));break;case"function":this._set(arguments[1].call(this));break;case"string":this._setRaw(arguments[0],void 0);break;default:throw new Error("Unknown call style for .set():"+t)}return this}function _(t,e){return this._context[t]=e,this}function b(t){if(0!=this._struct.length){if("end"!=this._struct[this._struct.length-1].type)throw new Error("While trying to find an end point in the async-chainable structure the last item in the this._struct does not have type==end!");this._struct[this._struct.length-1].payload.call(this._options.context,t),this._options.autoReset&&this.reset()}}function v(t){var e=this;if(t)return this._finalize(t);do{var n=!1;if(e._structPointer>=e._struct.length)return this._finalize(t);e._deferCheck();var o=e._struct[e._structPointer];if(!o.type)throw new Error("No type is specified for async-chainable structure at offset "+e._structPointer);if(e._structPointer++,["parallelArray","parallelObject","parallelCollection","forEachArray","forEachObject","seriesArray","seriesObject","seriesCollection","deferArray","deferObject","deferCollection","set"].indexOf(o.type)>-1&&(!o.payload||i(o.payload)&&!o.payload.length||a(o.payload)&&!Object.keys(o.payload).length))o.completed=!0,n=!0;else switch(o.type){case"parallelArray":e._run(o.payload.map(function(t){return function(n){t.call(e._options.context,n)}}),e._options.limit,function(t){o.completed=!0,e._execute(t)});break;case"parallelObject":var c=[];Object.keys(o.payload).forEach(function(t){c.push(function(n){o.payload[t].call(e._options.context,function(r,i){e._set(t,i),n(r)})})}),e._run(c,e._options.limit,function(t){o.completed=!0,e._execute(t)});break;case"parallelCollection":var c=[];o.payload.forEach(function(t){Object.keys(t).forEach(function(n){c.push(function(r,i){if("function"!=typeof t[n])throw new Error("Collection item for parallel exec is not a function",o.payload);t[n].call(e._options.context,function(t,i){e._set(n,i),r(t)})})})}),e._run(c,e._options.limit,function(t){o.completed=!0,e._execute(t)});break;case"forEachArray":e._run(o.payload.map(function(t,n){return e._context._item=t,e._context._key=n,function(r){o.callback.call(e._options.context,r,t,n)}}),e._options.limit,function(t){o.completed=!0,e._execute(t)});break;case"forEachObject":var c=[];Object.keys(o.payload).forEach(function(t){c.push(function(n){e._context._item=o.payload[t],e._context._key=t,o.callback.call(e._options.context,function(r,i){e._set(t,i),n(r)},o.payload[t],t)})}),e._run(c,e._options.limit,function(t){o.completed=!0,e._execute(t)});break;case"forEachLateBound":if(!o.payload||!o.payload.length||!e._context[o.payload]){o.completed=!0,n=!0;break}var s=r([e._context[o.payload]]);switch(s){case"collection":case"array":o.type="forEachArray";break;case"object":o.type="forEachObject";break;default:throw new Error("Cannot perform forEach over unknown object type: "+s)}o.payload=e._context[o.payload],e._structPointer--,n=!0;break;case"seriesArray":e._run(o.payload.map(function(t){return function(n){t.call(e._options.context,n)}}),1,function(t){o.completed=!0,e._execute(t)});break;case"seriesObject":var c=[];Object.keys(o.payload).forEach(function(t){c.push(function(n){o.payload[t].call(e._options.context,function(r,i){e._set(t,i),n(r)})})}),e._run(c,1,function(t){o.completed=!0,e._execute(t)});break;case"seriesCollection":var c=[];o.payload.forEach(function(t){Object.keys(t).forEach(function(n){c.push(function(r,i){if("function"!=typeof t[n])throw new Error("Collection item for series exec is not a function",o.payload);t[n].call(e._options.context,function(t,i){e._set(n,i),r(t)})})})}),e._run(c,1,function(t){o.completed=!0,e._execute(t)});break;case"deferArray":o.payload.forEach(function(t){e._deferAdd(null,t,o)}),n=!0;break;case"deferObject":Object.keys(o.payload).forEach(function(t){e._deferAdd(t,o.payload[t],o)}),n=!0;break;case"deferCollection":o.payload.forEach(function(t){Object.keys(t).forEach(function(n){e._deferAdd(n,t[n],o)})}),n=!0;break;case"await":o.payload.length?o.payload.every(function(t){return!!e._context[t]})?(o.completed=!0,n=!0):e._structPointer--:e._struct.slice(0,e._structPointer-1).every(function(t){return t.completed})?(o.completed=!0,n=!0):e._structPointer--;break;case"limit":e._options.limit=o.payload,o.completed=!0,n=!0;break;case"context":e._options.context=o.payload?o.payload:e._context,o.completed=!0,n=!0;break;case"set":Object.keys(o.payload).forEach(function(t){e._set(t,o.payload[t])}),o.completed=!0,n=!0;break;case"end":this._finalize();break;default:if(!this._plugins[o.type])throw new Error("Unknown async-chainable exec type: "+o.type);return void this._plugins[o.type].call(this,o)}}while(n)}function k(t,e,n){1==e?j.series(t,n):e>0?j.parallelLimit(t,e,n):j.parallel(t,n)}function w(){this._struct=[],this._structPointer=0;var t=this._options.context==this._context;this._context={_struct:this._struct,_structPointer:this._structPointer,_options:this._options,_deferredRunning:this._deferredRunning},t&&(this._options.context=this._context)}function x(){var t=r(arguments);switch(t){case"":this._struct.push({type:"end",payload:function(){}});break;case"function":this._struct.push({type:"end",payload:arguments[0]});break;default:throw new Error("Unknown call style for .end(): "+t)}return this._execute(),this}var j=t("async"),O={},E=function(){return this._struct=[],this._structPointer=0,this._context={},this._options={autoReset:!0,limit:10,context:this._context},this._execute=v,this._run=k,this._deferCheck=f,this._deferAdd=l,this._deferred=[],this._deferredRunning=0,this._finalize=b,this._getOverload=r,this._plugins=O,this.await=h,this.context=d,this.defer=p,this.end=x,this.forEach=u,this.limit=y,this.parallel=s,this.reset=w,this.series=c,this.set=m,this._set=g,this._setRaw=_,this.then=c,this["new"]=function(){return new E},this.use=o,this.each=j.each,this.eachSeries=j.eachSeries,this.eachLimit=j.eachLimit,this.map=j.map,this.mapSeries=j.mapSeries,this.mapLimit=j.mapLimit,this.filter=j.filter,this.filterSeries=j.filterSeries,this.reject=j.reject,this.rejectSeries=j.rejectSeries,this.reduce=j.reduce,this.reduceRight=j.reduceRight,this.detect=j.detect,this.detectSeries=j.detectSeries,this.sortBy=j.sortBy,this.some=j.some,this.every=j.every,this.concat=j.concat,this.concatSeries=j.concatSeries,this.parallelLimit=j.parallelLimit,this.whilst=j.whilst,this.doWhilst=j.doWhilst,this.until=j.until,this.doUntil=j.doUntil,this.forever=j.forever,this.waterfall=j.waterfall,this.compose=j.compose,this.seq=j.seq,this.applyEach=j.applyEach,this.applyEachSeries=j.applyEachSeries,this.queue=j.queue,this.priorityQueue=j.priorityQueue,this.cargo=j.cargo,this.auto=j.auto,this.retry=j.retry,this.iterator=j.iterator,this.apply=j.apply,this.nextTick=j.nextTick,this.times=j.times,this.timesSeries=j.timesSeries,this.Utils=j.Utils,this.memoize=j.memoize,this.unmemoize=j.unmemoize,this.log=j.log,this.dir=j.dir,this.noConflict=j.noConflict,this.reset(),this};e.exports=function(){return new E}},{async:2}],2:[function(e,n,r){(function(e,r){!function(){function i(){}function a(t){return t}function o(t){return!!t}function c(t){return!t}function s(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function u(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function l(t){return M(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function f(t,e){return l(t)?p(t,e):m(t,e)}function p(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function h(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function y(t){return h(Array(t),function(t,e){return e})}function d(t,e,n){return p(t,function(t,r,i){n=e(n,t,r,i)}),n}function m(t,e){p(Q(t),function(n){e(t[n],n)})}function g(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function _(t){var e,n,r=-1;return l(t)?(e=t.length,function(){return r++,e>r?r:null}):(n=Q(t),e=n.length,function(){return r++,e>r?n[r]:null})}function b(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;n>i;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function v(t){return function(e,n,r){return t(e,r)}}function k(t){return function(e,n,r){r=u(r||i),e=e||[];var a=_(e);if(0>=t)return r(null);var o=!1,c=0,l=!1;!function f(){if(o&&0>=c)return r(null);for(;t>c&&!l;){var i=a();if(null===i)return o=!0,void(0>=c&&r(null));c+=1,n(e[i],i,s(function(t){c-=1,t?(r(t),l=!0):f()}))}}()}}function w(t){return function(e,n,r){return t(B.eachOf,e,n,r)}}function x(t){return function(e,n,r,i){return t(k(n),e,r,i)}}function j(t){return function(e,n,r){return t(B.eachOfSeries,e,n,r)}}function O(t,e,n,r){r=u(r||i);var a=[];t(e,function(t,e,r){n(t,function(t,n){a[e]=n,r(t)})},function(t){r(t,a)})}function E(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(h(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function S(t,e,n,r){E(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function A(t,e,n){return function(r,i,a,o){function c(){o&&o(n(!1,void 0))}function s(t,r,i){return o?void a(t,function(r){o&&e(r)&&(o(n(!0,t)),o=a=!1),i()}):i()}arguments.length>3?t(r,i,s,c):(o=a,a=i,t(r,s,c))}}function L(t,e){return e}function C(t,e,n){n=n||i;var r=l(e)?[]:{};t(e,function(t,e,n){t(b(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function q(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function R(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length&&t.idle()?B.setImmediate(function(){t.drain()}):(p(e,function(e){var a={data:e,callback:r||i};n?t.tasks.unshift(a):t.tasks.push(a),t.tasks.length===t.concurrency&&t.saturated()}),void B.setImmediate(t.process))}function a(t,e){return function(){o-=1;var n=arguments;p(e,function(t){t.callback.apply(t,n)}),t.tasks.length+o===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,c={tasks:[],concurrency:e,payload:n,saturated:i,empty:i,drain:i,started:!1,paused:!1,push:function(t,e){r(c,t,!1,e)},kill:function(){c.drain=i,c.tasks=[]},unshift:function(t,e){r(c,t,!0,e)},process:function(){if(!c.paused&&o<c.concurrency&&c.tasks.length)for(;o<c.concurrency&&c.tasks.length;){var e=c.payload?c.tasks.splice(0,c.payload):c.tasks.splice(0,c.tasks.length),n=h(e,function(t){return t.data});0===c.tasks.length&&c.empty(),o+=1;var r=s(a(c,e));t(n,r)}},length:function(){return c.tasks.length},running:function(){return o},idle:function(){return c.tasks.length+o===0},pause:function(){c.paused=!0},resume:function(){if(c.paused!==!1){c.paused=!1;for(var t=Math.min(c.concurrency,c.tasks.length),e=1;t>=e;e++)B.setImmediate(c.process)}}};return c}function I(t){return b(function(e,n){e.apply(null,n.concat([b(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&p(n,function(e){console[t](e)}))})]))})}function P(t){return function(e,n,r){t(y(e),n,r)}}function U(t){return b(function(e,n){var r=b(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function T(t){return b(function(e){var n=e.pop();e.push(function(){var t=arguments;r?B.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var z,B={},W="object"==typeof self&&self.self===self&&self||"object"==typeof r&&r.global===r&&r||this;null!=W&&(z=W.async),B.noConflict=function(){return W.async=z,B};var D=Object.prototype.toString,M=Array.isArray||function(t){return"[object Array]"===D.call(t)},N=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},Q=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},F="function"==typeof setImmediate&&setImmediate,H=F?function(t){F(t)}:function(t){setTimeout(t,0)};B.nextTick="object"==typeof e&&"function"==typeof e.nextTick?e.nextTick:H,B.setImmediate=F?H:B.nextTick,B.forEach=B.each=function(t,e,n){return B.eachOf(t,v(e),n)},B.forEachSeries=B.eachSeries=function(t,e,n){return B.eachOfSeries(t,v(e),n)},B.forEachLimit=B.eachLimit=function(t,e,n,r){return k(e)(t,v(n),r)},B.forEachOf=B.eachOf=function(t,e,n){function r(t){t?n(t):(o+=1,o>=a&&n(null))}n=u(n||i),t=t||[];var a=l(t)?t.length:Q(t).length,o=0;return a?void f(t,function(n,i){e(t[i],i,s(r))}):n(null)},B.forEachOfSeries=B.eachOfSeries=function(t,e,n){function r(){var i=!0;return null===o?n(null):(e(t[o],o,s(function(t){if(t)n(t);else{if(o=a(),null===o)return n(null);i?B.nextTick(r):r()}})),void(i=!1))}n=u(n||i),t=t||[];var a=_(t),o=a();r()},B.forEachOfLimit=B.eachOfLimit=function(t,e,n,r){k(e)(t,n,r)},B.map=w(O),B.mapSeries=j(O),B.mapLimit=x(O),B.inject=B.foldl=B.reduce=function(t,e,n,r){B.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t||null,e)})},B.foldr=B.reduceRight=function(t,e,n,r){var i=h(t,a).reverse();B.reduce(i,e,n,r)},B.select=B.filter=w(E),B.selectLimit=B.filterLimit=x(E),B.selectSeries=B.filterSeries=j(E),B.reject=w(S),B.rejectLimit=x(S),B.rejectSeries=j(S),B.any=B.some=A(B.eachOf,o,a),B.someLimit=A(B.eachOfLimit,o,a),B.all=B.every=A(B.eachOf,c,c),B.everyLimit=A(B.eachOfLimit,c,c),B.detect=A(B.eachOf,a,L),B.detectSeries=A(B.eachOfSeries,a,L),B.detectLimit=A(B.eachOfLimit,a,L),B.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return r>n?-1:n>r?1:0}B.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,h(e.sort(r),function(t){return t.value}))})},B.auto=function(t,e){function n(t){l.unshift(t)}function r(t){var e=g(l,t);e>=0&&l.splice(e,1)}function a(){c--,p(l.slice(0),function(t){t()})}e=u(e||i);var o=Q(t),c=o.length;if(!c)return e(null);var s={},l=[];n(function(){c||e(null,s)}),p(o,function(i){function o(){return d(p,function(t,e){return t&&s.hasOwnProperty(e)},!0)&&!s.hasOwnProperty(i)}function c(){o()&&(r(c),l[l.length-1](f,s))}for(var u,l=M(t[i])?t[i]:[t[i]],f=b(function(t,n){if(n.length<=1&&(n=n[0]),t){var r={};m(s,function(t,e){r[e]=t}),r[i]=n,e(t,r)}else s[i]=n,B.setImmediate(a)}),p=l.slice(0,l.length-1),h=p.length;h--;){if(!(u=t[p[h]]))throw new Error("Has inexistant dependency");if(M(u)&&g(u,i)>=0)throw new Error("Has cyclic dependencies")}o()?l[l.length-1](f,s):n(c)})},B.retry=function(t,e,n){function r(t,e){if("number"==typeof e)t.times=parseInt(e,10)||a;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||a,t.interval=parseInt(e.interval,10)||o}}function i(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var i=!(s.times-=1);c.push(n(s.task,i)),!i&&s.interval>0&&c.push(r(s.interval))}B.series(c,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}var a=5,o=0,c=[],s={times:a,interval:o},u=arguments.length;if(1>u||u>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return 2>=u&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&r(s,t),s.callback=n,s.task=e,s.callback?i():i},B.waterfall=function(t,e){function n(t){return b(function(r,i){if(r)e.apply(null,[r].concat(i));else{var a=t.next();i.push(a?n(a):e),T(t).apply(null,i)}})}if(e=u(e||i),!M(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(B.iterator(t))():e()},B.parallel=function(t,e){C(B.eachOf,t,e)},B.parallelLimit=function(t,e,n){C(k(e),t,n)},B.series=function(t,e){C(B.eachOfSeries,t,e)},B.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},B.apply=b(function(t,e){return b(function(n){return t.apply(null,e.concat(n))})}),B.concat=w(q),B.concatSeries=j(q),B.whilst=function(t,e,n){if(n=n||i,t()){var r=b(function(i,a){i?n(i):t.apply(this,a)?e(r):n(null)});e(r)}else n(null)},B.doWhilst=function(t,e,n){var r=0;return B.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},B.until=function(t,e,n){return B.whilst(function(){return!t.apply(this,arguments)},e,n)},B.doUntil=function(t,e,n){return B.doWhilst(t,function(){return!e.apply(this,arguments)},n)},B.during=function(t,e,n){n=n||i;var r=b(function(e,r){e?n(e):(r.push(a),t.apply(this,r))}),a=function(t,i){t?n(t):i?e(r):n(null)};t(a)},B.doDuring=function(t,e,n){var r=0;B.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},B.queue=function(t,e){var n=R(function(e,n){t(e[0],n)},e,1);return n},B.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;i>r;){var a=r+(i-r+1>>>1);n(e,t[a])>=0?r=a:i=a-1}return r}function a(t,e,a,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,M(e)||(e=[e]),0===e.length?B.setImmediate(function(){t.drain()}):void p(e,function(e){var c={data:e,priority:a,callback:"function"==typeof o?o:i};t.tasks.splice(r(t.tasks,c,n)+1,0,c),t.tasks.length===t.concurrency&&t.saturated(),B.setImmediate(t.process)})}var o=B.queue(t,e);return o.push=function(t,e,n){a(o,t,e,n)},delete o.unshift,o},B.cargo=function(t,e){return R(t,1,e)},B.log=I("log"),B.dir=I("dir"),B.memoize=function(t,e){var n={},r={};e=e||a;var i=b(function(i){var a=i.pop(),o=e.apply(null,i);o in n?B.nextTick(function(){a.apply(null,n[o])}):o in r?r[o].push(a):(r[o]=[a],t.apply(null,i.concat([b(function(t){n[o]=t;var e=r[o];delete r[o];for(var i=0,a=e.length;a>i;i++)e[i].apply(null,t)})])))});return i.memo=n,i.unmemoized=t,i},B.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},B.times=P(B.map),B.timesSeries=P(B.mapSeries),B.timesLimit=function(t,e,n,r){return B.mapLimit(y(t),e,n,r)},B.seq=function(){var t=arguments;return b(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=i,B.reduce(t,e,function(t,e,r){e.apply(n,t.concat([b(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},B.compose=function(){return B.seq.apply(null,Array.prototype.reverse.call(arguments))},B.applyEach=U(B.eachOf),B.applyEachSeries=U(B.eachOfSeries),B.forever=function(t,e){function n(t){return t?r(t):void a(n)}var r=s(e||i),a=T(t);n()},B.ensureAsync=T,B.constant=b(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),B.wrapSync=B.asyncify=function(t){return b(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(i){return r(i)}N(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)})["catch"](function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof n&&n.exports?n.exports=B:"function"==typeof t&&t.amd?t([],function(){return B}):W.async=B}()}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],3:[function(t,e,n){function r(){l=!1,c.length?u=c.concat(u):f=-1,u.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c[f].run();f=-1,e=u.length}c=null,l=!1,clearTimeout(t)}}function a(t,e){this.fun=t,this.array=e}function o(){}var c,s=e.exports={},u=[],l=!1,f=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new a(t,e)),1!==u.length||l||setTimeout(i,0)},a.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},{}]},{},[1])(1)});
//# sourceMappingURL=async-chainable.js.map